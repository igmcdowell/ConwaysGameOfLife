<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>
			LifeTest
		</title>
		<meta name="generator" content="TextMate http://macromates.com/">
		<meta name="author" content="Ian McDowell"><!-- Date: 2011-05-12 -->
		<link rel="stylesheet" href="./default.css" type="text/css" />
		<script src="./jquery-1.6.1.min.js" type="text/javascript">
</script>
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js" type="text/javascript">
</script>
		<script src="./life.js" type="text/javascript">
</script>
		<script type="text/javascript">

		$(document).ready(function() {
			var g = new Grid(50,50);
			g.AddGridToDOM();
			$(document).mouseup(function(){
				$("td").unbind('mouseover');
			});
			$("#speedcontrol").draggable({ axis: 'x' }, { containment: 'parent' });
			$("#advance").click(function(){
				Advance(g);
			});
			$("#gamecontrol").click(function(){
				StartStop(g);
			});
			$("#newgrid").click(function(){
				w= parseInt($("#gridwidth")[0].value);
				h= parseInt($("#gridheight")[0].value);
				g = NewGrid(w,h);
			});
			
			$("#stringify").click(function(){
				var string = g.GridToString();
				$("#stringarea")[0].value = string;
			});
			
			$("#gridify").click(function(){
				var s = $("#stringarea")[0].value;
				g=NewGrid(s,0);
			});
			
			$(".toggle").click(function(){
				$(this).toggleClass('expanded');
				if($(this).hasClass('expanded')) {
					$(this).next('.group').show();
					$(this).css('background-image', "url('minusbox.png')");
				}
				else {
					$(this).next('.group').hide();
					$(this).css('background-image', "url('plusbox.png')");
				}
			});
			
			$("#rainbow").click(function(){
				$("#lifegrid").toggleClass('rainbowtable');
				
			});
			
			$("#speedcontrol").mouseup(function(){
				$("#gamespeed")[0].value = $("#speedcontrol").position().left;
			});
			
			$("#blinker").mousedown(function() {
				DragShape([[0,-1],[0,0],[0,1]], g);
			});
			
			$("#glider").mousedown(function(){
				DragShape([[-1,1],[0,0],[1,0],[-1,-1],[0,-1]],g);
			});
			
			$("#toad").mousedown(function(){
				DragShape([[0,0],[1,0],[2,0],[-1,-1],[0,-1],[1,-1]],g);
			});
			
			$("#beacon").mousedown(function(){
				DragShape([[0,0],[1,0],[0,1],[1,1],[2,2],[3,2],[2,3],[3,3]],g);
			});
			
			$("#pulsar").mousedown(function(){
				DragShape([[0,0],[1,0],[2,0],[6,0],[7,0],[8,0],
					[-2,2],[3,2],[5,2],[10,2],
					[-2,3],[3,3],[5,3],[10,3],
					[-2,4],[3,4],[5,4],[10,4],
					[0,5],[1,5],[2,5],[6,5],[7,5],[8,5],
					[0,7],[1,7],[2,7],[6,7],[7,7],[8,7],
					[-2,8],[3,8],[5,8],[10,8],
					[-2,9],[3,9],[5,9],[10,9],
					[-2,10],[3,10],[5,10],[10,10],
					[0,12],[1,12],[2,12],[6,12],[7,12],[8,12],
					],g);
			});
			
			$("#fpentomino").mousedown(function(){
				DragShape([[0,0],[1,0],[-1,1],[0,1],[0,2]],g);
			});
			
			$("#diehard").mousedown(function(){
				DragShape([[6,-1],[0,0],[1,0],[1,1],[5,1],[6,1],[7,1]],g);
			});
			$("#acorn").mousedown(function(){
				DragShape([[0,0],[2,1],[-1,2],[0,2],[3,2],[4,2],[5,2]],g);
			});
			$("#lwss").mousedown(function(){
				DragShape([[0,0],[3,0],[4,1],[0,2],[4,2],[1,3],[2,3],[3,3],[4,3]],g);
			});
			
		});
		</script>
		<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-22272971-1']);
		_gaq.push(['_trackPageview']);
		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
		</script>
	</head>
	<body>
		<div>
			<h1>
				Conway's Game of Life
			</h1>
			<div class="collapsiblesection">
				<h2>
					About:
				</h2>
				<div class="toggle expanded"></div>
				<div id="info" class="group">
					<p>
						"Conway's Game of Life" is a mathematical simulation designed by John Horton Conway. This isn't the kind of game you score points in; you can think of it as a sort of "sim bacteria" where you set up some start conditions and watch what happens
					</p>
					<h3>
						Instructions
					</h3>
					<p>
						Click any square to make it "alive." Click a living square to make it "dead." You can also click and drag to change large swaths of cells, or you can drag and drop prefabs to see some of the well-known patterns. 
					</p>
					<p>
						Click "Advance" to run one day of reproduction, or click "Run Simulation" to run multiple days in a row. You can speed up or slow down the simulation using the "Play Speed" bar.
						</p>
					<h3>
						Rules (from <a href="http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Wikipedia</a>)
					</h3>
					<ol>
						<li>The walls (squares around the perimeter) are poison. No cells will live there for more than a round.
						</li>
						<li>Any live square with fewer than two live neighbours dies at the end of the round.
						</li>
						<li>Any live cell with two or three live neighbours lives on to the next generation.
						</li>
						<li>Any live cell with more than three live neighbours dies, as if by overcrowding.
						</li>
						<li>Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction.
						</li>
					</ol>
				</div>
			</div>
		</div>
		<div class="collapsiblesection">
			<h2>
				Settings and Appearance:
			</h2>
			<div class="toggle expanded"></div>
			<div class="group">
				<div class="group">
					<p>
						<strong>Play Speed</strong>
					</p>
					<div id="slider">
						<div id="slowlabel" class="slidelabel">
							Slow
						</div>
						<div id="mediumlabel" class="slidelabel">
							Medium
						</div>
						<div id="fastlabel" class="slidelabel">
							Fast
						</div>
						<div id="speedcontrol"></div>
					</div>
					<button id="advance">Advance One Day</button><button id="gamecontrol" value="stop">Run Simulation</button>
			</div>
			<div class="group">
			<div>
				Cell Size:<input id="boxsize" value="20"><button onclick="SetBoxSize()">Set Cell Size</button>
			</div>
			<div><input type="checkbox" id="rainbow" checked="checked" /> Rainbow Cells
		</div>
		</div>
		</div>
		<div class="collapsiblesection">
			<h2>
				Grid Data:
			</h2>
			<div class="toggle expanded"></div>
			<div class="group">
			<div>	
				<p>
					<strong>To/From String</strong>
				</p>			
				<textarea wrap="virtual" id="stringarea"></textarea>
				<div><button id="stringify">Store Grid As String</button><button id="gridify">Create Grid From String</button></div>
				<p>
					<strong>New Blank Grid</strong>
				</p>
								 Width: <input id="gridwidth" value="50"> Height:<input id="gridheight" value="50"> <button id="newgrid">Create New Grid</button>
			</div>
				
		</div>
		</div>
		</div>
		<div class="collapsiblesection">
			<h2>
				Prefabs - Drag and Drop:
			</h2>
			<div class="toggle expanded"></div>
			<div id="prefabs" class="group">
				<div id="blinker" class="prefab">Blinker</div>
				<div id="toad" class="prefab">Toad</div>
				<div id="beacon" class="prefab">Beacon</div>
				<div id="pulsar" class="prefab">Pulsar</div>
		
				<div id="glider" class="prefab">Glider</div>
				<div id="lwss" class="prefab">Light-weight Space Ship</div>
		
				<div id="fpentomino" class="prefab">F-Pentomino</div>
				<div id="diehard" class="prefab">Diehard</div>
				<div id="acorn" class="prefab">Acorn</div>
			</div>
			<input type="hidden" id="gamespeed" value="85" />
		</div>
	</body>
</html>
